<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>QnA - ì½”ë“œë¸”ë£¨</title>

<!-- Custom fonts for this template-->
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

<!-- Custom styles for this template-->
<link href="css/sb-admin-2.min.css" rel="stylesheet">
<!-- Custom styles for codeBlue -->
<link href="css/codeBlue.css" rel="stylesheet">
</head>

<body id="page-top" >
 
	<!-- Topbar -->
	<div id="topBar"></div>
	<!-- End of Topbar -->

		<!-- Begin Page Content -->
		<div class="container">
			<div class="row"> 
			
				<!-- Side Bar -->
				<div class="col-sm-1 p-0" style="border-right: 1px solid #d9d9d9;">
					<nav class="navbar pl-0 sticky-container">
						<div style="margin-top: 70px">
							<ul class="nav flex-column">
								<li class="pl-0"><small>ì§ˆë¬¸</small></li> 
								<li class="nav-item pl-1"><a class="nav-link pl-2 font-weight-bold pt-1 pb-0" href="/">today</a></li> 
								<li class="nav-item pl-1"><a class="nav-link pl-2 text-danger font-weight-bold pt-1 pb-0" href="/">hot ğŸ”¥</a></li>
								<li class="nav-item pl-1"><a class="nav-link pl-2 text-warning font-weight-bold pt-1 pb-0" href="/">help!</a></li>
								<li class="nav-item pl-1"><a class="nav-link pl-2 text-success font-weight-bold pt-1 pb-0" href="/">ongoing</a></li>
								<li class="mt-2"><small>ì¡°íšŒ</small></li> 
								<li class="nav-item"><a class="nav-link text-dark pl-2 pt-1 pb-0" href="/">ìœ ì €</a></li>
								<li class="nav-item"><a class="nav-link text-dark pl-2 pt-1 pb-0" href="/">íƒœê·¸</a></li>
								<li class="nav-item"><a class="nav-link text-dark pl-2 pt-1 pb-0" href="/">ë­í‚¹</a></li>
							</ul>
						</div> 
					</nav>
				</div>
				<!-- Side Bar End -->
				
				<!-- Page Content -->
				<div class="col-sm-8">
					<!-- Page Heading -->
					<div class="d-sm-flex align-items-center justify-content-between mb-2" style="margin-top: 80px">
						<h3 class="text-gray-800 mb-2 font-weight-bold">QnA</h3>
						<a href="/ask" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow"><i class="mr-2 fas fa-plus fa-sm text-white-50"></i>ì§ˆë¬¸ ì˜¬ë¦¬ê¸°</a> 
					</div>
					<!-- page Heading End -->
					<div class="card mb-3 border-primary p-1"><ul class="nav" id="feilds"></ul></div>
					
					
					<table id="questionBoard" class="table table-hover"></table>
					<br>
					
					<button type="button" id="prevBtn" class="btn btn-primary">ì´ì „</button>
					<button type="button" id="nextBtn" class="btn btn-primary">ë‹¤ìŒ</button>
					
				</div>
				<!-- Page rigth side bar -->
				<div class="col-sm-3 pt-5">
					<div class="card border-1 shadow bg-light border-bottom-primary mt-4">
						<small class='text-primary font-weight-bold card-header alert-primary px-3 border-0'>
							New! ìƒˆ ì†Œì‹ì´ ìˆì–´ìš”
						</small>
						<table class=" table table-sm mb-0">
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
						</table>			
						<small class='text-primary font-weight-bold card-header alert-primary px-3 border-0'>
							ê¶ê¸ˆí•œ ê²ƒì´ ìˆë‚˜ìš”?
						</small>	
						<table class=" table table-sm mb-0">
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><i class='far fa-comment-dots mx-1'></i>ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><img src='img/codeblueicon.png' width="15px">ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
							<tr>
								<td><a class='nav-link small px-2' href='#'><img src='img/codeblueicon.png' width="15px">ë„ì™€ì£¼ì„¸ìš©</a></td>
							</tr>
						</table>				
					</div>
				</div> <!-- rigth side bar end -->
				
			</div>
		</div> 

<!-- ETC -->
  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded bg-primary" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">Ã—</span>
          </button>
        </div>
        <div class="modal-body">ë¡œê·¸ì•„ì›ƒ í•˜ê³  ì‹¶ìœ¼ì‹œë©´ ì•„ë˜ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ì„¸ìš”!</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">ì·¨ì†Œ</button>
          <a class="btn btn-primary" href="/logout">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
      </div>
    </div>
  </div>
  
	<!-- Footer -->        
	<div id="footer"></div>
	<!-- End of Footer -->


	<!-- Bootstrap core JavaScript-->
	<script src="vendor/jquery/jquery.min.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Core plugin JavaScript-->
	<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

	<!-- Custom scripts for all pages-->
	<script src="js/sb-admin-2.min.js"></script>

  	<!-- CodeBlue scripts -->
  	<script src="js/codeBlueUser.js"></script>
  	
</body>

<script type="text/javascript">
	
	
	//í˜„ì¬í˜ì´ì§€ê°’
	var currentPage = 1;
	//ë§ˆì§€ë§‰í˜ì´ì§€ê°’
	var lastPage = 0;
	//ê²€ìƒ‰í•œ ë‹¨ì–´
	var searchWord = null;

	// í•„ë“œ í…Œì´ë¸” ì¶œë ¥
	$.ajax({
		url : "/rest/getFeildList",
		method : "GET",
		success : function(json){
			console.log(json);
			
			$(json).each(function(index, item){
				html = " <li class='nav-item'> <a class='nav-link p-1 mx-1 hov-p text-primary' onclick='getQuestionList()' value='"+item.feildId+"'>"+
						item.feildName +
						"</a></li>";
				$("#feilds").append(html);
				
			})
		}
	})
	
	// ë¶„ì•¼ í•„í„°ë§ 
	function getQuestionList(){
		console.log(this)
	}
	
	//í™ˆí˜ì´ì§€
	$.ajax({
		url:"/rest/getBoardList",
		method:"POST",
		data:{"currentPage" : currentPage},
		success: function(json){
			currentPage = json.currentPage;
			lastPage = json.lastPage;
			BtnShow(currentPage,lastPage);
			$(json.list).each(function(index,item){
				html = append(item);
				$("#questionBoard").append(html);
			})
		}
	})
	
	//ì´ì „ë²„íŠ¼
	$("#prevBtn").click(function(){
		$.ajax({
			url:"/rest/getBoardList",
			method:"POST",
			data:{"currentPage" : currentPage-1,"searchWord": searchWord},
			success: function(json){
				currentPage = json.currentPage;
				lastPage = json.lastPage;
				$("#searchWord").val(json.searchWord);
				BtnShow(currentPage,lastPage);
				$("#questionBoard").empty();
				$(json.list).each(function(index,item){
					html = append(item);
					$("#questionBoard").append(html);
				})
			}
		})
	});
	
	//ë‹¤ìŒë²„íŠ¼
	$("#nextBtn").click(function(){
		$.ajax({
			url:"/rest/getBoardList",
			method:"POST",
			data:{"currentPage" : currentPage+1,"searchWord": searchWord},
			success: function(json){
				currentPage = json.currentPage;
				lastPage = json.lastPage;
				$("#searchWord").val(json.searchWord);
				BtnShow(currentPage,lastPage);
				$("#questionBoard").empty();
				$(json.list).each(function(index,item){
					html = append(item);
					$("#questionBoard").append(html);
				})
			}
		})
	});
	
	//ê²€ìƒ‰ë²„íŠ¼
	$("#search").click(function(){
		$.ajax({
			url:"/rest/getBoardList",
			method:"POST",
			data:{"searchWord": $("#searchWord").val()},
			success: function(json){
				console.log(json);
				currentPage = json.currentPage;
				lastPage = json.lastPage;
				$("#searchWord").val(json.searchWord);
				searchWord = json.searchWord;
				BtnShow(currentPage,lastPage);
				$("#questionBoard").empty();
				$(json.list).each(function(index,item){
					html = append(item);							
					$("#questionBoard").append(html);
				})
			}
		})
	});
	
	//ì´ì „ ë‹¤ìŒ ë²„íŠ¼ì´ ìˆ¨ê¸°ëŠ”ì§€ ì•ˆìˆ¨ê¸°ëŠ”ì§€ í•¨ìˆ˜ë¡œë³€ê²½
	function BtnShow(currentPage,lastPage) {
		if(currentPage == 1){
			$("#prevBtn").hide();
		} else {
			$("#prevBtn").show();
		}
		if(currentPage <lastPage) {
			$("#nextBtn").show();
		} else {
			$("#nextBtn").hide();
		}
	}
	
	function append(item){
		return "<tr>"+
		"<td width='9%' class=><div class='text-center pt-1'>"+item.voteCount+"<br>"+
		"<small class='my-1'>ì¶”ì²œ</small>"+
		"</div></td>"+
		"<td width='11%' class='px-1'><div class='card border-success text-center pt-1' >"+item.answerCount+"<br>"+
		"<small class='text-success my-1'>ë‹µë³€</small>"+
		"</div></td>"+
		"<td><a class='nav-link' href='/questionBoardOne?questionId="+item.questionId+"'>"+item.questionTitle+"</a>" +
		"<div class='d-flex justify-content-between'>"+
		"<small class='p-2'>íƒœê·¸ë“¤...</small>"+
		"<small class='p-2'>uploaded at"+item.questionDatetime +" by " + item.userId+"</small></div>"
		+"</td></tr>";
	}
</script>

</html>
